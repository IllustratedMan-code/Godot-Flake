From f7f21eabb92d717acac2e09b9a934f0f7bfe76cb Mon Sep 17 00:00:00 2001
From: David Lewis <davidalewis00@gmail.com>
Date: Fri, 22 Apr 2022 12:48:51 -0400
Subject: [PATCH 4/4] added glu libs

---
 0001-added-xfixes.patch        | 56 ++++++++++++++++++++++++++++++++
 0002-added-glu.patch           | 25 +++++++++++++++
 0003-godot-compile-fixes.patch | 58 ++++++++++++++++++++++++++++++++++
 platform/linuxbsd/detect.py    |  3 +-
 4 files changed, 141 insertions(+), 1 deletion(-)
 create mode 100644 0001-added-xfixes.patch
 create mode 100644 0002-added-glu.patch
 create mode 100644 0003-godot-compile-fixes.patch

diff --git a/0001-added-xfixes.patch b/0001-added-xfixes.patch
new file mode 100644
index 0000000000..526e743c65
--- /dev/null
+++ b/0001-added-xfixes.patch
@@ -0,0 +1,56 @@
+From 819caf4fa16681875cfaa613613446e9e62d90f9 Mon Sep 17 00:00:00 2001
+From: David Lewis <davidalewis00@gmail.com>
+Date: Fri, 22 Apr 2022 10:09:58 -0400
+Subject: [PATCH 1/3] added xfixes
+
+---
+ platform/linuxbsd/detect.py | 5 +++++
+ 1 file changed, 5 insertions(+)
+
+diff --git a/platform/linuxbsd/detect.py b/platform/linuxbsd/detect.py
+index 39f9b99108..8be6053a08 100644
+--- a/platform/linuxbsd/detect.py
++++ b/platform/linuxbsd/detect.py
+@@ -226,6 +226,7 @@ def configure(env):
+     env.ParseConfig("pkg-config xrandr --cflags --libs")
+     env.ParseConfig("pkg-config xrender --cflags --libs")
+     env.ParseConfig("pkg-config xi --cflags --libs")
++    env.ParseConfig("pkg-config xfixes --cflags")
+ 
+     if env["touch"]:
+         env.Append(CPPDEFINES=["TOUCH_ENABLED"])
+@@ -319,6 +320,7 @@ def configure(env):
+     if os.system("pkg-config --exists alsa") == 0:  # 0 means found
+         env["alsa"] = True
+         env.Append(CPPDEFINES=["ALSA_ENABLED", "ALSAMIDI_ENABLED"])
++        env.ParseConfig("pkg-config alsa --cflags")  # Only cflags, we dlopen the library.
+     else:
+         print("Warning: ALSA libraries not found. Disabling the ALSA audio driver.")
+ 
+@@ -326,6 +328,7 @@ def configure(env):
+         if os.system("pkg-config --exists libpulse") == 0:  # 0 means found
+             env.Append(CPPDEFINES=["PULSEAUDIO_ENABLED"])
+             env.ParseConfig("pkg-config --cflags libpulse")
++            env.ParseConfig("pkg-config libpulse --cflags")  # Only cflags, we dlopen the library.
+         else:
+             print("Warning: PulseAudio development libraries not found. Disabling the PulseAudio audio driver.")
+ 
+@@ -333,6 +336,7 @@ def configure(env):
+         if os.system("pkg-config --exists dbus-1") == 0:  # 0 means found
+             env.Append(CPPDEFINES=["DBUS_ENABLED"])
+             env.ParseConfig("pkg-config --cflags --libs dbus-1")
++            env.ParseConfig("pkg-config dbus-1 --cflags --libs")
+         else:
+             print("Warning: D-Bus development libraries not found. Disabling screensaver prevention.")
+ 
+@@ -341,6 +345,7 @@ def configure(env):
+         if env["udev"]:
+             if os.system("pkg-config --exists libudev") == 0:  # 0 means found
+                 env.Append(CPPDEFINES=["UDEV_ENABLED"])
++                env.ParseConfig("pkg-config libudev --cflags")  # Only cflags, we dlopen the library.
+             else:
+                 print("Warning: libudev development libraries not found. Disabling controller hotplugging support.")
+     else:
+-- 
+2.35.1
+
diff --git a/0002-added-glu.patch b/0002-added-glu.patch
new file mode 100644
index 0000000000..7020425e51
--- /dev/null
+++ b/0002-added-glu.patch
@@ -0,0 +1,25 @@
+From 920d821f67c04086d52933ca5c18f0c4089f83ca Mon Sep 17 00:00:00 2001
+From: David Lewis <davidalewis00@gmail.com>
+Date: Fri, 22 Apr 2022 10:22:38 -0400
+Subject: [PATCH 2/3] added glu
+
+---
+ platform/linuxbsd/detect.py | 2 ++
+ 1 file changed, 2 insertions(+)
+
+diff --git a/platform/linuxbsd/detect.py b/platform/linuxbsd/detect.py
+index 8be6053a08..53bb925476 100644
+--- a/platform/linuxbsd/detect.py
++++ b/platform/linuxbsd/detect.py
+@@ -227,6 +227,8 @@ def configure(env):
+     env.ParseConfig("pkg-config xrender --cflags --libs")
+     env.ParseConfig("pkg-config xi --cflags --libs")
+     env.ParseConfig("pkg-config xfixes --cflags")
++    env.ParseConfig("pkg-config glu --cflags")
++
+ 
+     if env["touch"]:
+         env.Append(CPPDEFINES=["TOUCH_ENABLED"])
+-- 
+2.35.1
+
diff --git a/0003-godot-compile-fixes.patch b/0003-godot-compile-fixes.patch
new file mode 100644
index 0000000000..443a434b8d
--- /dev/null
+++ b/0003-godot-compile-fixes.patch
@@ -0,0 +1,58 @@
+From 42aab3c8baf683ca0609aac8a3c7ed81fec4ed2b Mon Sep 17 00:00:00 2001
+From: David Lewis <davidalewis00@gmail.com>
+Date: Fri, 22 Apr 2022 10:33:55 -0400
+Subject: [PATCH 3/3] godot-compile fixes
+
+---
+ platform/linuxbsd/detect.py | 7 +++++++
+ 1 file changed, 7 insertions(+)
+
+diff --git a/platform/linuxbsd/detect.py b/platform/linuxbsd/detect.py
+index 39f9b99108..53bb925476 100644
+--- a/platform/linuxbsd/detect.py
++++ b/platform/linuxbsd/detect.py
+@@ -226,6 +226,9 @@ def configure(env):
+     env.ParseConfig("pkg-config xrandr --cflags --libs")
+     env.ParseConfig("pkg-config xrender --cflags --libs")
+     env.ParseConfig("pkg-config xi --cflags --libs")
++    env.ParseConfig("pkg-config xfixes --cflags")
++    env.ParseConfig("pkg-config glu --cflags")
++
+ 
+     if env["touch"]:
+         env.Append(CPPDEFINES=["TOUCH_ENABLED"])
+@@ -319,6 +322,7 @@ def configure(env):
+     if os.system("pkg-config --exists alsa") == 0:  # 0 means found
+         env["alsa"] = True
+         env.Append(CPPDEFINES=["ALSA_ENABLED", "ALSAMIDI_ENABLED"])
++        env.ParseConfig("pkg-config alsa --cflags")  # Only cflags, we dlopen the library.
+     else:
+         print("Warning: ALSA libraries not found. Disabling the ALSA audio driver.")
+ 
+@@ -326,6 +330,7 @@ def configure(env):
+         if os.system("pkg-config --exists libpulse") == 0:  # 0 means found
+             env.Append(CPPDEFINES=["PULSEAUDIO_ENABLED"])
+             env.ParseConfig("pkg-config --cflags libpulse")
++            env.ParseConfig("pkg-config libpulse --cflags")  # Only cflags, we dlopen the library.
+         else:
+             print("Warning: PulseAudio development libraries not found. Disabling the PulseAudio audio driver.")
+ 
+@@ -333,6 +338,7 @@ def configure(env):
+         if os.system("pkg-config --exists dbus-1") == 0:  # 0 means found
+             env.Append(CPPDEFINES=["DBUS_ENABLED"])
+             env.ParseConfig("pkg-config --cflags --libs dbus-1")
++            env.ParseConfig("pkg-config dbus-1 --cflags --libs")
+         else:
+             print("Warning: D-Bus development libraries not found. Disabling screensaver prevention.")
+ 
+@@ -341,6 +347,7 @@ def configure(env):
+         if env["udev"]:
+             if os.system("pkg-config --exists libudev") == 0:  # 0 means found
+                 env.Append(CPPDEFINES=["UDEV_ENABLED"])
++                env.ParseConfig("pkg-config libudev --cflags")  # Only cflags, we dlopen the library.
+             else:
+                 print("Warning: libudev development libraries not found. Disabling controller hotplugging support.")
+     else:
+-- 
+2.35.1
+
diff --git a/platform/linuxbsd/detect.py b/platform/linuxbsd/detect.py
index 53bb925476..5b96190e7c 100644
--- a/platform/linuxbsd/detect.py
+++ b/platform/linuxbsd/detect.py
@@ -227,7 +227,8 @@ def configure(env):
     env.ParseConfig("pkg-config xrender --cflags --libs")
     env.ParseConfig("pkg-config xi --cflags --libs")
     env.ParseConfig("pkg-config xfixes --cflags")
-    env.ParseConfig("pkg-config glu --cflags")
+    env.ParseConfig("pkg-config glu --cflags --libs")
+    
 
 
     if env["touch"]:
-- 
2.35.1

